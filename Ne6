-- LocalScript trong StarterPlayerScripts
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

local savedCFrame = nil
local VOID_Y = -40 -- auto v·ªÅ khi r∆°i xu·ªëng

-- üìå T·∫°o GUI
local gui = Instance.new("ScreenGui")
gui.Name = "ProHubUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- üåà Vi·ªÅn Rainbow
local function rainbow(obj)
	task.spawn(function()
		local hue = 0
		while task.wait(0.05) do
			hue = (hue + 1) % 360
			obj.Color = Color3.fromHSV(hue/360, 1, 1)
		end
	end)
end

-- üìå Toggle Button
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.fromOffset(120, 40)
toggleBtn.Position = UDim2.new(0, 20, 0.8, 0)
toggleBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
toggleBtn.Text = "MENU"
toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleBtn.TextScaled = true
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.Parent = gui
Instance.new("UICorner", toggleBtn)
local tStroke = Instance.new("UIStroke", toggleBtn)
tStroke.Thickness = 2
rainbow(tStroke)

-- üìå Menu ch√≠nh
local frame = Instance.new("Frame")
frame.Size = UDim2.fromOffset(280, 220)
frame.Position = UDim2.new(0.05, 0, 0.4, 0)
frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
frame.Visible = false
frame.Parent = gui
Instance.new("UICorner", frame)
local stroke = Instance.new("UIStroke", frame)
stroke.Thickness = 3
rainbow(stroke)

-- üìå Cho ph√©p di chuy·ªÉn m∆∞·ª£t
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local dragging, dragStart, startPos
local tween

frame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = frame.Position
	end
end)

frame.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = false
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - dragStart
		local goal = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		if tween then tween:Cancel() end
		tween = TweenService:Create(frame, TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Position = goal})
		tween:Play()
	end
end)

-- üìå Title
local title = Instance.new("TextLabel")
title.Text = "‚ö° PRO HUB"
title.Size = UDim2.fromOffset(260, 40)
title.Position = UDim2.new(0.5, -130, 0, 5)
title.TextScaled = true
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.BackgroundTransparency = 1
title.Parent = frame

-- üìå T·∫°o h√†m button
local function createBtn(text, posY)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.fromOffset(240, 40)
	btn.Position = UDim2.new(0.5, -120, 0, posY)
	btn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	btn.Text = text
	btn.TextScaled = true
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.GothamBold
	btn.Parent = frame
	Instance.new("UICorner", btn)
	local s = Instance.new("UIStroke", btn)
	s.Thickness = 2
	rainbow(s)
	return btn
end

-- üìå Speed Control
local speedLabel = Instance.new("TextLabel")
speedLabel.Text = "Speed: " .. humanoid.WalkSpeed
speedLabel.Size = UDim2.fromOffset(200, 30)
speedLabel.Position = UDim2.new(0.5, -100, 0, 50)
speedLabel.TextScaled = true
speedLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
speedLabel.Font = Enum.Font.GothamBold
speedLabel.BackgroundTransparency = 1
speedLabel.Parent = frame

local speedUp = createBtn("‚ñ≤ Speed Up", 80)
local speedDown = createBtn("‚ñº Speed Down", 125)

speedUp.MouseButton1Click:Connect(function()
	humanoid.WalkSpeed += 5
	speedLabel.Text = "Speed: " .. humanoid.WalkSpeed
end)

speedDown.MouseButton1Click:Connect(function()
	humanoid.WalkSpeed = math.max(0, humanoid.WalkSpeed - 5)
	speedLabel.Text = "Speed: " .. humanoid.WalkSpeed
end)

-- üìå Jump Control
local jumpLabel = Instance.new("TextLabel")
jumpLabel.Text = "Jump: " .. humanoid.JumpPower
jumpLabel.Size = UDim2.fromOffset(200, 30)
jumpLabel.Position = UDim2.new(0.5, -100, 0, 170)
jumpLabel.TextScaled = true
jumpLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
jumpLabel.Font = Enum.Font.GothamBold
jumpLabel.BackgroundTransparency = 1
jumpLabel.Parent = frame

local jumpUp = createBtn("‚ñ≤ Jump Up", 200)
local jumpDown = createBtn("‚ñº Jump Down", 245)

jumpUp.MouseButton1Click:Connect(function()
	humanoid.JumpPower += 10
	jumpLabel.Text = "Jump: " .. humanoid.JumpPower
end)

jumpDown.MouseButton1Click:Connect(function()
	humanoid.JumpPower = math.max(0, humanoid.JumpPower - 10)
	jumpLabel.Text = "Jump: " .. humanoid.JumpPower
end)

-- üìå Save & Return
local saveBtn = createBtn("üíæ Save Position", 290)
local returnBtn = createBtn("‚Ü© Return Position", 335)

saveBtn.MouseButton1Click:Connect(function()
	savedCFrame = root.CFrame
	saveBtn.Text = "‚úÖ Saved!"
	task.delay(1.5, function() saveBtn.Text = "üíæ Save Position" end)
end)

returnBtn.MouseButton1Click:Connect(function()
	if savedCFrame then
		root.CFrame = savedCFrame + Vector3.new(0,3,0)
	else
		returnBtn.Text = "‚ö† No Save!"
		task.delay(1.5, function() returnBtn.Text = "‚Ü© Return Position" end)
	end
end)

-- üìå Toggle menu
toggleBtn.MouseButton1Click:Connect(function()
	frame.Visible = not frame.Visible
end)

-- üìå Auto return khi ch·∫øt ho·∫∑c r∆°i void
local function autoReturn()
	if savedCFrame then
		task.wait(0.2)
		character = player.Character or player.CharacterAdded:Wait()
		root = character:WaitForChild("HumanoidRootPart")
		root.CFrame = savedCFrame + Vector3.new(0,3,0)
	end
end

humanoid.Died:Connect(function()
	player.CharacterAdded:Wait()
	autoReturn()
end)

game:GetService("RunService").Heartbeat:Connect(function()
	if savedCFrame and root then
		if root.Position.Y < VOID_Y then
			autoReturn()
		end
	end
end)

-- üìå Th√¥ng b√°o khi v√†o game
local msg = Instance.new("TextLabel")
msg.Text = "‚ú® C·∫£m ∆°n ƒë√£ s·ª≠ d·ª•ng PRO HUB ‚ú®"
msg.Size = UDim2.new(1,0,0,60)
msg.Position = UDim2.new(0,0,0.05,0)
msg.TextScaled = true
msg.TextColor3 = Color3.fromRGB(255, 255, 255)
msg.Font = Enum.Font.GothamBold
msg.BackgroundTransparency = 1
msg.Parent = gui
game:GetService("TweenService"):Create(msg, TweenInfo.new(3, Enum.EasingStyle.Quad), {TextTransparency = 1}):Play()
task.wait(3)
msg:Destroy()
