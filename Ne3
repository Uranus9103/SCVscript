-- LocalScript trong StarterPlayerScripts
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

-- Bi·∫øn
local savedCFrame = nil
local VOID_Y = -40
local currentSpeed = 16
local jumpPower = 50
local infiniteJump = false

-- UI
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "ProMenuUI"
gui.ResetOnSpawn = false

-- H√†m ƒë·ªïi m√†u vi·ªÅn li√™n t·ª•c
local function rainbowBorder(obj)
	task.spawn(function()
		local h = 0
		while obj and obj.Parent do
			h = (h + 1) % 360
			obj.UIStroke.Color = Color3.fromHSV(h/360,1,1)
			task.wait(0.05)
		end
	end)
end

-- N√∫t m·ªü menu
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.fromOffset(130, 50)
toggleBtn.Position = UDim2.new(0, 20, 0.8, 0)
toggleBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
toggleBtn.Text = "‚ò∞ Menu"
toggleBtn.TextScaled = true
toggleBtn.TextColor3 = Color3.new(1,1,1)
toggleBtn.Parent = gui
Instance.new("UICorner", toggleBtn)
local stroke = Instance.new("UIStroke", toggleBtn)
stroke.Thickness = 2
rainbowBorder(toggleBtn)

-- Khung menu
local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.fromOffset(260, 260)
menuFrame.Position = UDim2.new(0, 20, 0.5, -130)
menuFrame.BackgroundColor3 = Color3.fromRGB(44, 62, 80)
menuFrame.Visible = false
menuFrame.Parent = gui
Instance.new("UICorner", menuFrame)
local stroke2 = Instance.new("UIStroke", menuFrame)
stroke2.Thickness = 2
rainbowBorder(menuFrame)

-- N√∫t L∆∞u v·ªã tr√≠
local saveBtn = Instance.new("TextButton")
saveBtn.Size = UDim2.fromOffset(220, 40)
saveBtn.Position = UDim2.new(0.5, -110, 0, 20)
saveBtn.BackgroundColor3 = Color3.fromRGB(39, 174, 96)
saveBtn.Text = "üíæ L∆∞u v·ªã tr√≠"
saveBtn.TextScaled = true
saveBtn.TextColor3 = Color3.new(1,1,1)
saveBtn.Parent = menuFrame
Instance.new("UICorner", saveBtn)
local stroke3 = Instance.new("UIStroke", saveBtn)
stroke3.Thickness = 2
rainbowBorder(saveBtn)

-- N√∫t V·ªÅ v·ªã tr√≠
local backBtn = Instance.new("TextButton")
backBtn.Size = UDim2.fromOffset(220, 40)
backBtn.Position = UDim2.new(0.5, -110, 0, 70)
backBtn.BackgroundColor3 = Color3.fromRGB(231, 76, 60)
backBtn.Text = "‚Ü©Ô∏è V·ªÅ v·ªã tr√≠"
backBtn.TextScaled = true
backBtn.TextColor3 = Color3.new(1,1,1)
backBtn.Parent = menuFrame
Instance.new("UICorner", backBtn)
local stroke4 = Instance.new("UIStroke", backBtn)
stroke4.Thickness = 2
rainbowBorder(backBtn)

-- Infinite Jump toggle
local jumpBtn = Instance.new("TextButton")
jumpBtn.Size = UDim2.fromOffset(220, 40)
jumpBtn.Position = UDim2.new(0.5, -110, 0, 120)
jumpBtn.BackgroundColor3 = Color3.fromRGB(155, 89, 182)
jumpBtn.Text = "ü¶ò B·∫≠t nh·∫£y v√¥ h·∫°n"
jumpBtn.TextScaled = true
jumpBtn.TextColor3 = Color3.new(1,1,1)
jumpBtn.Parent = menuFrame
Instance.new("UICorner", jumpBtn)
local stroke5 = Instance.new("UIStroke", jumpBtn)
stroke5.Thickness = 2
rainbowBorder(jumpBtn)

-- ƒêi·ªÅu ch·ªânh t·ªëc ƒë·ªô
local speedFrame = Instance.new("Frame")
speedFrame.Size = UDim2.fromOffset(220, 60)
speedFrame.Position = UDim2.new(0.5, -110, 0, 180)
speedFrame.BackgroundColor3 = Color3.fromRGB(52, 73, 94)
speedFrame.Parent = menuFrame
Instance.new("UICorner", speedFrame)
local stroke6 = Instance.new("UIStroke", speedFrame)
stroke6.Thickness = 2
rainbowBorder(speedFrame)

local upBtn = Instance.new("TextButton")
upBtn.Size = UDim2.fromOffset(50, 50)
upBtn.Position = UDim2.new(0, 5, 0.5, -25)
upBtn.BackgroundColor3 = Color3.fromRGB(46, 204, 113)
upBtn.Text = "‚ñ≤"
upBtn.TextScaled = true
upBtn.TextColor3 = Color3.new(1,1,1)
upBtn.Parent = speedFrame
Instance.new("UICorner", upBtn)

local downBtn = Instance.new("TextButton")
downBtn.Size = UDim2.fromOffset(50, 50)
downBtn.Position = UDim2.new(1, -55, 0.5, -25)
downBtn.BackgroundColor3 = Color3.fromRGB(231, 76, 60)
downBtn.Text = "‚ñº"
downBtn.TextScaled = true
downBtn.TextColor3 = Color3.new(1,1,1)
downBtn.Parent = speedFrame
Instance.new("UICorner", downBtn)

local speedLabel = Instance.new("TextLabel")
speedLabel.Size = UDim2.fromOffset(100, 50)
speedLabel.Position = UDim2.new(0.5, -50, 0.5, -25)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "T·ªëc: "..currentSpeed
speedLabel.TextScaled = true
speedLabel.TextColor3 = Color3.new(1,1,1)
speedLabel.Parent = speedFrame

-- Toggle menu
toggleBtn.MouseButton1Click:Connect(function()
	menuFrame.Visible = not menuFrame.Visible
end)

-- L∆∞u v·ªã tr√≠
saveBtn.MouseButton1Click:Connect(function()
	character = player.Character or player.CharacterAdded:Wait()
	root = character:WaitForChild("HumanoidRootPart")
	savedCFrame = root.CFrame
	saveBtn.Text = "‚úÖ ƒê√£ l∆∞u!"
	task.delay(1.5, function() saveBtn.Text = "üíæ L∆∞u v·ªã tr√≠" end)
end)

-- V·ªÅ v·ªã tr√≠
backBtn.MouseButton1Click:Connect(function()
	if savedCFrame then
		character = player.Character or player.CharacterAdded:Wait()
		root = character:WaitForChild("HumanoidRootPart")
		root.CFrame = savedCFrame + Vector3.new(0,3,0)
	else
		backBtn.Text = "‚ö†Ô∏è Ch∆∞a l∆∞u!"
		task.delay(1.5, function() backBtn.Text = "‚Ü©Ô∏è V·ªÅ v·ªã tr√≠" end)
	end
end)

-- Toggle nh·∫£y v√¥ h·∫°n
jumpBtn.MouseButton1Click:Connect(function()
	infiniteJump = not infiniteJump
	if infiniteJump then
		jumpBtn.Text = "‚úÖ ƒêang nh·∫£y v√¥ h·∫°n"
	else
		jumpBtn.Text = "ü¶ò B·∫≠t nh·∫£y v√¥ h·∫°n"
	end
end)

-- ƒêi·ªÅu ch·ªânh t·ªëc ƒë·ªô
local function updateSpeed()
	humanoid.WalkSpeed = currentSpeed
	speedLabel.Text = "T·ªëc: "..currentSpeed
end

upBtn.MouseButton1Click:Connect(function()
	currentSpeed = currentSpeed + 5
	updateSpeed()
end)

downBtn.MouseButton1Click:Connect(function()
	currentSpeed = math.max(0, currentSpeed - 5)
	updateSpeed()
end)

-- Infinite Jump
game:GetService("UserInputService").JumpRequest:Connect(function()
	if infiniteJump and humanoid then
		humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

-- Auto Return khi ch·∫øt
local function autoReturn()
	if savedCFrame then
		task.wait(0.3)
		character = player.Character or player.CharacterAdded:Wait()
		root = character:WaitForChild("HumanoidRootPart")
		root.CFrame = savedCFrame + Vector3.new(0,3,0)
	end
end

humanoid.Died:Connect(function()
	player.CharacterAdded:Wait()
	autoReturn()
end)

-- Check r∆°i void
game:GetService("RunService").Heartbeat:Connect(function()
	if savedCFrame and root then
		if root.Position.Y < VOID_Y then
			autoReturn()
		end
	end
end)

-- Kh·ªüi t·∫°o t·ªëc ƒë·ªô ban ƒë·∫ßu
updateSpeed()
