-- Đặt script này trong StarterPlayerScripts (LocalScript)
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

-- Hàm tạo ESP
local function createESP(player)
    if player.Character and player.Character:FindFirstChild("Head") then
        if not player.Character.Head:FindFirstChild("ESPTag") then
            local billboard = Instance.new("BillboardGui")
            billboard.Name = "ESPTag"
            billboard.Size = UDim2.new(0, 100, 0, 30)
            billboard.AlwaysOnTop = true
            billboard.Adornee = player.Character.Head
            billboard.Parent = player.Character.Head

            local textLabel = Instance.new("TextLabel")
            textLabel.Size = UDim2.new(1, 0, 1, 0)
            textLabel.BackgroundTransparency = 1
            textLabel.Text = player.Name
            textLabel.TextColor3 = Color3.new(1, 0, 0) -- Màu đỏ
            textLabel.TextStrokeTransparency = 0
            textLabel.Parent = billboard
        end
    end
end

-- Gán cho người chơi hiện có
for _, player in pairs(Players:GetPlayers()) do
    if player ~= localPlayer then
        player.CharacterAdded:Connect(function()
            task.wait(1) -- chờ nhân vật load
            createESP(player)
        end)
        if player.Character then
            createESP(player)
        end
    end
end

-- Khi có người mới vào
Players.PlayerAdded:Connect(function(player)
    if player ~= localPlayer then
        player.CharacterAdded:Connect(function()
            task.wait(1)
            createESP(player)
        end)
    end
end)
