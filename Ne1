-- LocalScript trong StarterPlayerScripts
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

-- Bi·∫øn
local savedCFrame = nil
local VOID_Y = -40
local speedEnabled = false
local normalSpeed = 16
local boostedSpeed = 60

-- UI
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "ProMenuUI"
gui.ResetOnSpawn = false

-- H√†m ƒë·ªïi m√†u vi·ªÅn li√™n t·ª•c
local function rainbowBorder(obj)
	task.spawn(function()
		local h = 0
		while obj and obj.Parent do
			h = (h + 1) % 360
			obj.UIStroke.Color = Color3.fromHSV(h/360,1,1)
			task.wait(0.05)
		end
	end)
end

-- N√∫t m·ªü menu
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.fromOffset(130, 50)
toggleBtn.Position = UDim2.new(0, 20, 0.8, 0)
toggleBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
toggleBtn.Text = "‚ò∞ Menu"
toggleBtn.TextScaled = true
toggleBtn.TextColor3 = Color3.new(1,1,1)
toggleBtn.Parent = gui
Instance.new("UICorner", toggleBtn)
local stroke = Instance.new("UIStroke", toggleBtn)
stroke.Thickness = 2
rainbowBorder(toggleBtn)

-- Khung menu
local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.fromOffset(240, 200)
menuFrame.Position = UDim2.new(0, 20, 0.5, -100)
menuFrame.BackgroundColor3 = Color3.fromRGB(44, 62, 80)
menuFrame.Visible = false
menuFrame.Parent = gui
Instance.new("UICorner", menuFrame)
local stroke2 = Instance.new("UIStroke", menuFrame)
stroke2.Thickness = 2
rainbowBorder(menuFrame)

-- N√∫t L∆∞u v·ªã tr√≠
local saveBtn = Instance.new("TextButton")
saveBtn.Size = UDim2.fromOffset(200, 40)
saveBtn.Position = UDim2.new(0.5, -100, 0, 20)
saveBtn.BackgroundColor3 = Color3.fromRGB(39, 174, 96)
saveBtn.Text = "üíæ L∆∞u v·ªã tr√≠"
saveBtn.TextScaled = true
saveBtn.TextColor3 = Color3.new(1,1,1)
saveBtn.Parent = menuFrame
Instance.new("UICorner", saveBtn)
local stroke3 = Instance.new("UIStroke", saveBtn)
stroke3.Thickness = 2
rainbowBorder(saveBtn)

-- N√∫t V·ªÅ v·ªã tr√≠
local backBtn = Instance.new("TextButton")
backBtn.Size = UDim2.fromOffset(200, 40)
backBtn.Position = UDim2.new(0.5, -100, 0, 70)
backBtn.BackgroundColor3 = Color3.fromRGB(231, 76, 60)
backBtn.Text = "‚Ü©Ô∏è V·ªÅ v·ªã tr√≠"
backBtn.TextScaled = true
backBtn.TextColor3 = Color3.new(1,1,1)
backBtn.Parent = menuFrame
Instance.new("UICorner", backBtn)
local stroke4 = Instance.new("UIStroke", backBtn)
stroke4.Thickness = 2
rainbowBorder(backBtn)

-- N√∫t T·ªëc ƒë·ªô
local speedBtn = Instance.new("TextButton")
speedBtn.Size = UDim2.fromOffset(200, 40)
speedBtn.Position = UDim2.new(0.5, -100, 0, 120)
speedBtn.BackgroundColor3 = Color3.fromRGB(52, 152, 219)
speedBtn.Text = "‚ö° B·∫≠t t·ªëc ƒë·ªô"
speedBtn.TextScaled = true
speedBtn.TextColor3 = Color3.new(1,1,1)
speedBtn.Parent = menuFrame
Instance.new("UICorner", speedBtn)
local stroke5 = Instance.new("UIStroke", speedBtn)
stroke5.Thickness = 2
rainbowBorder(speedBtn)

-- Toggle menu
toggleBtn.MouseButton1Click:Connect(function()
	menuFrame.Visible = not menuFrame.Visible
end)

-- L∆∞u v·ªã tr√≠
saveBtn.MouseButton1Click:Connect(function()
	character = player.Character or player.CharacterAdded:Wait()
	root = character:WaitForChild("HumanoidRootPart")
	savedCFrame = root.CFrame
	saveBtn.Text = "‚úÖ ƒê√£ l∆∞u!"
	task.delay(1.5, function() saveBtn.Text = "üíæ L∆∞u v·ªã tr√≠" end)
end)

-- V·ªÅ v·ªã tr√≠
backBtn.MouseButton1Click:Connect(function()
	if savedCFrame then
		character = player.Character or player.CharacterAdded:Wait()
		root = character:WaitForChild("HumanoidRootPart")
		root.CFrame = savedCFrame + Vector3.new(0,3,0)
	else
		backBtn.Text = "‚ö†Ô∏è Ch∆∞a l∆∞u!"
		task.delay(1.5, function() backBtn.Text = "‚Ü©Ô∏è V·ªÅ v·ªã tr√≠" end)
	end
end)

-- T·ªëc ƒë·ªô ch·∫°y
speedBtn.MouseButton1Click:Connect(function()
	if speedEnabled then
		speedEnabled = false
		humanoid.WalkSpeed = normalSpeed
		speedBtn.Text = "‚ö° B·∫≠t t·ªëc ƒë·ªô"
	else
		speedEnabled = true
		humanoid.WalkSpeed = boostedSpeed
		speedBtn.Text = "üåÄ ƒêang tƒÉng t·ªëc"
	end
end)

-- Auto Return khi ch·∫øt
local function autoReturn()
	if savedCFrame then
		task.wait(0.3)
		character = player.Character or player.CharacterAdded:Wait()
		root = character:WaitForChild("HumanoidRootPart")
		root.CFrame = savedCFrame + Vector3.new(0,3,0)
	end
end

humanoid.Died:Connect(function()
	player.CharacterAdded:Wait()
	autoReturn()
end)

-- Check r∆°i void
game:GetService("RunService").Heartbeat:Connect(function()
	if savedCFrame and root then
		if root.Position.Y < VOID_Y then
			autoReturn()
		end
	end
end)
