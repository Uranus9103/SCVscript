-- LocalScript trong StarterPlayerScripts
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

-- Bi·∫øn l∆∞u
local savedCFrame = nil
local VOID_Y = -40
local currentSpeed = 16
local infJumpEnabled = false

-- UI ch√≠nh
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "ProMenu"
gui.ResetOnSpawn = false

-- H√†m vi·ªÅn rainbow
local function rainbowBorder(obj)
	task.spawn(function()
		local hue = 0
		while obj and obj.Parent do
			hue = (hue + 1) % 360
			obj.UIStroke.Color = Color3.fromHSV(hue/360, 1, 1)
			task.wait(0.05)
		end
	end)
end

-- H√†m t·∫°o n√∫t
local function createButton(text, size, pos, parent)
	local btn = Instance.new("TextButton")
	btn.Size = size
	btn.Position = pos
	btn.BackgroundColor3 = Color3.fromRGB(0,0,0)
	btn.Text = text
	btn.TextScaled = true
	btn.Font = Enum.Font.GothamBold
	btn.TextColor3 = Color3.fromRGB(255,255,255)
	btn.Parent = parent
	Instance.new("UICorner", btn)
	local stroke = Instance.new("UIStroke", btn)
	stroke.Thickness = 2
	rainbowBorder(btn)
	return btn
end

-- Th√¥ng b√°o v√†o game
do
	local notify = Instance.new("TextLabel", gui)
	notify.Size = UDim2.new(1,0,0,80)
	notify.Position = UDim2.new(0,0,0.3,0)
	notify.BackgroundTransparency = 1
	notify.Text = "‚ú® C·∫£m ∆°n ƒë√£ s·ª≠ d·ª•ng ‚ú®"
	notify.Font = Enum.Font.GothamBold
	notify.TextScaled = true
	notify.TextColor3 = Color3.fromRGB(255,255,255)
	notify.TextStrokeTransparency = 0.2
	notify.TextTransparency = 1

	task.spawn(function()
		for i=1,0,-0.05 do
			notify.TextTransparency = i
			task.wait(0.05)
		end
		task.wait(2)
		for i=0,1,0.05 do
			notify.TextTransparency = i
			task.wait(0.05)
		end
		notify:Destroy()
	end)
end

-- N√∫t m·ªü menu
local toggleBtn = createButton("Menu", UDim2.fromOffset(120,50), UDim2.new(0,20,0.8,0), gui)

-- Menu ch√≠nh
local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.fromOffset(260,340)
menuFrame.Position = UDim2.new(0,20,0.5,-170)
menuFrame.BackgroundColor3 = Color3.fromRGB(25,25,25)
menuFrame.Visible = false
menuFrame.Parent = gui
Instance.new("UICorner", menuFrame)
local stroke = Instance.new("UIStroke", menuFrame)
stroke.Thickness = 3
rainbowBorder(menuFrame)

-- N√∫t trong menu
local saveBtn = createButton("üíæ L∆∞u v·ªã tr√≠", UDim2.fromOffset(200,40), UDim2.new(0.5,-100,0,20), menuFrame)
local backBtn = createButton("‚¨ÖÔ∏è V·ªÅ v·ªã tr√≠", UDim2.fromOffset(200,40), UDim2.new(0.5,-100,0,70), menuFrame)

-- ƒêi·ªÅu ch·ªânh t·ªëc ƒë·ªô
local speedLabel = Instance.new("TextLabel", menuFrame)
speedLabel.Size = UDim2.fromOffset(200,40)
speedLabel.Position = UDim2.new(0.5,-100,0,130)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "Speed: "..currentSpeed
speedLabel.Font = Enum.Font.GothamBold
speedLabel.TextScaled = true
speedLabel.TextColor3 = Color3.fromRGB(255,255,255)

local plusBtn = createButton("‚ñ≤", UDim2.fromOffset(50,40), UDim2.new(0.5,60,0,130), menuFrame)
local minusBtn = createButton("‚ñº", UDim2.fromOffset(50,40), UDim2.new(0.5,-110,0,130), menuFrame)

-- N√∫t nh·∫£y v√¥ h·∫°n
local jumpBtn = createButton("üü¢ B·∫≠t nh·∫£y v√¥ h·∫°n", UDim2.fromOffset(200,40), UDim2.new(0.5,-100,0,190), menuFrame)

-- N√∫t reset nh√¢n v·∫≠t
local resetBtn = createButton("üîÑ Reset nh√¢n v·∫≠t", UDim2.fromOffset(200,40), UDim2.new(0.5,-100,0,250), menuFrame)

-- Toggle menu
toggleBtn.MouseButton1Click:Connect(function()
	menuFrame.Visible = not menuFrame.Visible
end)

-- L∆∞u v·ªã tr√≠
saveBtn.MouseButton1Click:Connect(function()
	character = player.Character or player.CharacterAdded:Wait()
	root = character:WaitForChild("HumanoidRootPart")
	savedCFrame = root.CFrame
	saveBtn.Text = "‚úÖ ƒê√£ l∆∞u!"
	task.delay(1.5, function() saveBtn.Text = "üíæ L∆∞u v·ªã tr√≠" end)
end)

-- V·ªÅ v·ªã tr√≠
backBtn.MouseButton1Click:Connect(function()
	if savedCFrame then
		character = player.Character or player.CharacterAdded:Wait()
		root = character:WaitForChild("HumanoidRootPart")
		root.CFrame = savedCFrame + Vector3.new(0,3,0)
	else
		backBtn.Text = "‚ùå Ch∆∞a l∆∞u!"
		task.delay(1.5, function() backBtn.Text = "‚¨ÖÔ∏è V·ªÅ v·ªã tr√≠" end)
	end
end)

-- ƒêi·ªÅu ch·ªânh t·ªëc ƒë·ªô
plusBtn.MouseButton1Click:Connect(function()
	currentSpeed += 5
	humanoid.WalkSpeed = currentSpeed
	speedLabel.Text = "Speed: "..currentSpeed
end)
minusBtn.MouseButton1Click:Connect(function()
	currentSpeed = math.max(0, currentSpeed - 5)
	humanoid.WalkSpeed = currentSpeed
	speedLabel.Text = "Speed: "..currentSpeed
end)

-- Nh·∫£y v√¥ h·∫°n
jumpBtn.MouseButton1Click:Connect(function()
	infJumpEnabled = not infJumpEnabled
	if infJumpEnabled then
		jumpBtn.Text = "üî¥ T·∫Øt nh·∫£y v√¥ h·∫°n"
	else
		jumpBtn.Text = "üü¢ B·∫≠t nh·∫£y v√¥ h·∫°n"
	end
end)

game:GetService("UserInputService").JumpRequest:Connect(function()
	if infJumpEnabled and humanoid then
		humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

-- Reset nh√¢n v·∫≠t
resetBtn.MouseButton1Click:Connect(function()
	if humanoid and humanoid.Health > 0 then
		humanoid.Health = 0
	end
end)

-- Auto return khi r∆°i/ch·∫øt
local function autoReturn()
	if savedCFrame then
		task.wait(0.2)
		character = player.Character or player.CharacterAdded:Wait()
		root = character:WaitForChild("HumanoidRootPart")
		root.CFrame = savedCFrame + Vector3.new(0,3,0)
	end
end

humanoid.Died:Connect(function()
	player.CharacterAdded:Wait()
	autoReturn()
end)

game:GetService("RunService").Heartbeat:Connect(function()
	if savedCFrame and root then
		if root.Position.Y < VOID_Y then
			autoReturn()
		end
	end
end)
